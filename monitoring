#!/usr/bin/perl
use LWP::UserAgent;
use HTTP::Request::Common qw( POST );

my $load = `uptime | grep -o 'load average.*' | cut -c 15-18`;
my $maxload = 0.75; # –º–∞–∫–∏—Å–º–∞–ª—å–Ω–∞—è –Ω–∞–≥—Ä—É–∑–∫–∞ (load average)


my $access_token = ''; # —Ç–æ–∫–µ–Ω –≥—Ä—É–ø–ø—ã
my $user_ids = '1'; # ID –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è(-–µ–π), –∫–æ—Ç–æ—Ä–æ–º—É(-—ã–º) –Ω–µ–æ–±—Ö–æ–¥–∏–º–æ –ø—Ä–∏—Å–ª–∞—Ç—å —É–≤–µ–¥–æ–º–ª–µ–Ω–∏–µ (–µ—Å–ª–∏ –Ω–µ—Å–∫–æ–ª—å–∫–æ, —Ç–æ –ø–µ—Ä–µ—á–∏—Å–ª–∏—Ç—å —á–µ—Ä–µ–∑ –∑–∞–ø—è—Ç—É—é)
my $text_msg = '‚õîÔ∏è –°–µ—Ä–≤–µ—Ä —Å–∏–ª—å–Ω–æ –Ω–∞–≥—Ä—É–∂–µ–Ω.<br>üõ† –¢–µ–∫—É—â–∞—è –Ω–∞–≥—Ä—É–∑–∫–∞: '.$load.'üî• –ú–∞–∫—Å–∏–º–∞–ª—å–Ω–∞—è –Ω–∞–≥—Ä—É–∑–∫–∞: '.$maxload; # —Ç–µ–∫—Å—Ç —Å–æ–æ–±—â–µ–Ω–∏—è

if ( $load >= $maxload ) {
	my $ua      = LWP::UserAgent->new(); 
	my $request = POST( 'https://api.vk.com/method/messages.send?peer_ids='.$user_ids.'&random_id=0&message='.$text_msg.'&v=5.144&access_token='.$access_token ); 
	my $content = $ua->request($request)->as_string();
}
